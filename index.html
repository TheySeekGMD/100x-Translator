<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Turbo Translator</title>
<style>
    body {
        margin: 0;
        font-family: "Segoe UI", Arial, sans-serif;
        background: #111214;
        color: #ffffff;
        overflow-x: hidden;
    }

    header {
        padding: 20px;
        font-size: 26px;
        font-weight: 300;
        text-align: center;
        opacity: 0;
        animation: fadeIn 0.9s ease forwards;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 25px;
        opacity: 0;
        animation: fadeIn 1.2s ease forwards;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-weight: 300;
        font-size: 16px;
    }

    select, input, textarea, button {
        width: 100%;
        padding: 12px;
        margin-bottom: 18px;
        border: none;
        border-radius: 6px;
        background: #1a1b1d;
        color: white;
        font-size: 15px;
        font-weight: 300;
        outline: none;
        transition: 0.3s ease;
    }

    select:hover, input:hover, textarea:hover {
        background: #232427;
    }

    button {
        background: #005f73;
        cursor: pointer;
        font-size: 17px;
        font-weight: 300;
    }

    button:hover {
        background: #008ea3;
    }

    #alertBox {
        position: fixed;
        top: 15px;
        right: 15px;
        background: #8b0000;
        padding: 15px 22px;
        border-radius: 6px;
        font-size: 15px;
        opacity: 0;
        transition: opacity 0.4s ease;
        pointer-events: none;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(12px); }
        to   { opacity: 1; transform: translateY(0); }
    }
</style>
</head>
<body>

<header>Turbo Translator</header>

<div class="container">

    <label for="finalLang">Final language:</label>
    <select id="finalLang">
        <option value="en">English</option>
        <option value="uk">Ukrainian</option>
        <option value="ru">Russian</option>
        <option value="pl">Polish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="es">Spanish</option>
        <option value="it">Italian</option>
        <option value="ro">Romanian</option>
        <option value="tr">Turkish</option>
        <option value="ja">Japanese</option>
        <option value="zh-CN">Chinese</option>
        <option value="ko">Korean</option>
        <option value="ar">Arabic</option>
        <option value="hi">Hindi</option>
    </select>

    <label for="count">Translations:</label>
    <input id="count" type="number" min="10" max="150" value="50">

    <label for="inputText">Enter text:</label>
    <textarea id="inputText" rows="5"></textarea>

    <button id="translateBtn">Translate</button>

    <label for="outputText">Result:</label>
    <textarea id="outputText" rows="7" readonly></textarea>
</div>

<div id="alertBox">You try to translate too often. Please wait a bit.</div>

<script>
const translateBtn = document.getElementById("translateBtn");
const alertBox = document.getElementById("alertBox");

let lastClick = 0;

// Escape input to avoid malicious characters
const safe = t => t.replace(/[<>"'();]/g, "");

async function translate(text, lang) {
    const url = "https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=" + lang + "&dt=t&q=" + encodeURIComponent(text);
    const res = await fetch(url);
    const data = await res.json();
    return data[0].map(x => x[0]).join("");
}

function randomLang() {
    const langs = ["en","uk","ru","pl","fr","de","es","it","ja","ko","zh-CN","ro","tr","ar","hi","sv","nl","pt","fi"];
    return langs[Math.floor(Math.random() * langs.length)];
}

async function runTranslation() {
    let now = Date.now();
    if (now - lastClick < 10000) {
        alertBox.style.opacity = "1";
        setTimeout(() => alertBox.style.opacity = "0", 2500);
        return;
    }
    lastClick = now;

    let text = safe(document.getElementById("inputText").value);
    let finalLang = document.getElementById("finalLang").value;
    let count = Number(document.getElementById("count").value);
    const output = document.getElementById("outputText");

    for (let i = 0; i < count; i++) {
        text = await translate(text, randomLang());
        let percent = Math.floor(((i+1)/count)*100);
        output.value = `[${percent}%] ${text}`;
    }

    text = await translate(text, finalLang);
    output.value = `[100%] ${text}`;
}

translateBtn.onclick = runTranslation;
</script>

</body>
</html>
